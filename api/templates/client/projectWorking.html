{% extends "base.html" %}

{% block styleLink %}

<link rel="stylesheet" href="/static/css/client/projectWorking.css">

{% endblock %}

{% block content %}

{% include "client/navbar.html" %}

<divclass="project-data-page">

    <divclass="project-data-container">

        <divclass="project-data">

              <h3>{project.title}</h3>
              <p>{project.description}</p>
              <span>
                <h5>Required skills</h5>
                <divclass="required-skills">
                    {% comment %} {project.skills.map((skill)=>( {% endcomment %}
                      <p key={skill}>{skill}</p>
                    
                </div>
              </span>
              <span>
                <h5>Budget</h5>
                <h6>&#8377; {project.budget}</h6>
              </span>

        </div>

        {% comment %} {project.freelancerId && project.freelancerId !== ""   ? {% endcomment %}
        
        <divclass="project-submissions-container">

            <h4>Submission</h4>

            <divclass="project-submissions">

                {% comment %} {project.submission ?  {% endcomment %}
                
                  <divclass="project-submission">

                        <span>
                          <h5>Project Link: </h5>
                          <a href={project.projectLink} target='_blank' >{project.projectLink}</a>
                        </span>

                        <span>
                          <h5>Manual Link: </h5>
                          <a href={project.manulaLink} target='_blank'>{project.manulaLink}</a>
                        </span>

                        
                          <h5>Description for work</h5>
                          <p>{project.submissionDescription}</p>
                      
                        {project.submissionAccepted ?
                          <h5 style={{color: "green"}} >project completed!!</h5>
                        :
                        
                          <divclass="submission-btns">
                            <buttonclass='btn btn-success' onClick={handleApproveSubmission} >Approve </button>
                            <buttonclass='btn btn-danger' onClick={handleRejectSubmission} >Reject</button>
                          </div>
                        }

                  </div>
                
                <p>No submissions yet!!</p>
                


            </div>

        </div>
        




    </div>



    <divclass="project-chat-container">

        <h4>Chat with the Freelancer</h4>
        <hr />

        {% comment %} {project.freelancerId ? {% endcomment %}
          
              <divclass="chat-body">

                  {% comment %} {chats ?  {% endcomment %}

                  <divclass="chat-messages">

                    {% comment %} {chats.messages.map((message)=>( {% endcomment %}

                        <divclass={message.senderId === localStorage.getItem("userId") ? "my-message": "received-message"} key={message.id}>
                          <div>
                              {/* {message.senderId === localStorage.getItem("userId") ? ""
                                : <h5>Client</h5>} */}
                              <p>{message.text}</p>
                              <h6>{message.time.slice(5,10)} - {message.time.slice(11,19)}</h6>
                          </div>
                        </div>
                    
                    

                  </div>



                  <hr />
                  <divclass="chat-input">
                    <input type="text"class='form-control' placeholder='Enter something...' value={message} onChange={(e)=> setMessage(e.target.value)} />
                    <button onClick={handleMessageSend} >Send</button>
                  </div>

              </div>
          
          <i style={{color: '#938f8f'}} >Chat will be enabled if the project is assigned to you!!</i>
          

    </div>

</div>

{% endblock %}